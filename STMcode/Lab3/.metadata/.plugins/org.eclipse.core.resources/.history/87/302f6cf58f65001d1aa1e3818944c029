/*
 * seven_seg.c
 *
 *  Created on: Nov 7, 2022
 *      Author: DELL
 */

#include "seven_seg.h"

int index_led = 0;
int led_buffer[MAX_LED] = {1, 2, 3, 4};

unsigned char SEG[10] = {0x40, 0x79, 0x24, 0x30, 0x19, 0x12, 0x02, 0x78, 0x00, 0x10};
void display7SEG(int num) {
	GPIOB->ODR = SEG[num];
}

void update7SEG(int index){
  switch (index){
	  case 0:
		  //Display the first 7SEG with led_buffer[0]
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_6, RESET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_7, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_8, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_9, SET);
		  display7SEG(led_buffer[0]);
		  break;
	  case 1:
		  //Display the second 7SEG with led_buffer[1]
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_6, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_7, RESET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_8, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_9, SET);
		  display7SEG(led_buffer[1]);
		  break;
	  case 2:
		  //Display the third 7SEG with led_buffer[2]
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_6, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_7, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_8, RESET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_9, SET);
		  display7SEG(led_buffer[2]);
		  break;
	  case 3:
		  //Display the forth 7SEG with led_buffer[3]
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_6, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_7, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_8, SET);
		  HAL_GPIO_WritePin(GPIOA, GPIO_PIN_9, RESET);
		  display7SEG(led_buffer[3]);
		  break;
	  default:
		  break;
  }
}
